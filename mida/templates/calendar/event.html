<!-- mida/templates/calendar/event.html -->
{% extends "cms/base.html" %}
{% load static wagtailcore_tags wagtailimages_tags social_share %}

{% block extra_css %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'mida/calendar/event.css' %}">
{% endblock extra_css %}

{% block body_class %}event{% endblock %}

{% block page_header %}

    <div class="hero-flex-container">
        
        <div class="hero-left">
            <div class="title-line">
                <h7 class="event-card__meta">
                    <div class="event-location">

                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="25" viewBox="0 0 18 25" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M17.8567 8.92836C17.8567 12.8993 15.2644 16.2647 11.6799 17.4247H11.808L9.04787 24.121L6.16776 17.4247H6.17686C2.59228 16.2647 0 12.8993 0 8.92836C0 3.99736 3.99736 0 8.92836 0C13.8594 0 17.8567 3.99736 17.8567 8.92836ZM8.92955 15.8884C12.6941 15.8884 15.7458 12.8367 15.7458 9.07213C15.7458 5.30761 12.6941 2.25586 8.92955 2.25586C5.16503 2.25586 2.11328 5.30761 2.11328 9.07213C2.11328 12.8367 5.16503 15.8884 8.92955 15.8884Z" fill="#00A564"/>
                        </svg>

                        {% if self.location %}
                            {{ self.location }}
                        {% else %}
                            Virtual
                        {% endif %}

                    </div>

                    {% if self.date %}
                        <div class="event-chip">
                            <img src="{% static 'mida/calendar/img/marcodataportal-global-icon-calendar.svg' %}" alt="Calendar icon">
                            <time datetime="{{ self.date|date:'c' }}">
                                {{ self.date|date:"F j, Y" }}
                            </time>
                        </div>
                    {% endif %}

                </h7>

                <h1 class="event-card__title event-title">
                    {% block title %}{{ self.title }}{% endblock %}
                </h1>

            </div>

            <div class="share-section">
                <p class="share-text">SHARE THIS POST:</p>

                <div class="share-icons">

                    {% post_to_facebook object_or_url %}

                    {% post_to_twitter "https://"|add:request.get_host|add:self.url|add:" - @PortalMARCO" %}

                    <a class="fa-stack fa-lg"
                    href="mailto:?subject={{self.title}}%20From%20Mid-Atlantic%20Ocean%20Data%20Portal"
                    target="_blank" title="Email" aria-label="Share via email">
                        <img class="share-icon" src="{% static 'mida/news/img/marcodataportal-global-icon-share-email-1.svg' %}" alt="Email icon" />
                    </a>
                </div>
            </div>

        </div>

        {% if self.feature_image %}
      
            {% image self.feature_image min-520x430 as feat_img %}
            
            <div class="hero-right">
                <div class="hero-image-wrap" style="background-image: url('{{ feat_img.url }}');">
                    <img class="feature" src="{{ feat_img.url }}" alt="{{ self.title }}" />
                </div>
            </div>
        
        {% endif %}

    </div>

{% endblock %}
    

{% block content %}

    <div class="contain">
        <div class="event-wrap">

            <section class="event-details">
                <article class="event-timing">
                    <h2 class="section-title">When?</h2>
                    <p class="event-date">
                        {{ self.date|date:"F j, Y" }}
                        {% if self.end_date %} 
                            - {{ self.end_date|date:"F j, Y" }}
                        {% endif %}
                    </p>
                </article>

                <article class="event-description">
                    <h2 class="section-title">Description</h2>
                    <div class="event-body">
                        {{ self.description|richtext }}
                    </div>
                </article>
            </section>

            {% if self.location %}
                <aside class="event-sidebar">
                    <section class="location-info">
                        <h2 class="section-title">Location</h2>
                        
                        <div class="location-details">
                            <div class="address">
                                <address>
                                    <div>{{ self.location|linebreaks }}</div>
                                </address>
                                <a href="https://maps.google.com?q={{ self.location }}"><i class="fa fa-map-marker"></i> Show on map</a>
                            </div>
                        </div>
                    </section>
                </aside>  
            {% endif %}

        </div>
    </div>

{% endblock %}

